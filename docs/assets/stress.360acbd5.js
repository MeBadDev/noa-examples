import{E as U}from"./index.b8668d75.js";import{a as n}from"./terrain_atlas.162877cc.js";import"./babylon.939b618b.js";var r=new U({debug:!0,showFPS:!0,inverseY:!0,chunkSize:48,chunkAddDistance:[8.5,6],playerStart:[0,10,0],playerAutoStep:!0});r.registry.registerMaterial("grass",{textureURL:n,atlasIndex:0});r.registry.registerMaterial("g_dirt",{textureURL:n,atlasIndex:1});r.registry.registerMaterial("dirt",{textureURL:n,atlasIndex:2});r.registry.registerMaterial("stone",{textureURL:n,atlasIndex:3});r.registry.registerMaterial("stone2",{textureURL:n,atlasIndex:4});r.registry.registerMaterial("cloud",{textureURL:n,atlasIndex:5});var u=1,D=r.registry.registerBlock(u++,{material:"dirt"}),P=r.registry.registerBlock(u++,{material:["grass","dirt","g_dirt"]}),y=r.registry.registerBlock(u++,{material:"stone"}),_=r.registry.registerBlock(u++,{material:"stone2"}),A=r.registry.registerBlock(u++,{material:"cloud"}),z=(t,e,a,i,g,m,s)=>e<i?e<-1.8?y:e<1.2?D:i-e<1?P:D:e<i+s?_:e>g&&e<m?A:0;r.world.on("worldDataNeeded",(t,e,a,i,g)=>{if(i>40||i<-20){var m=i>0?0:y;return r.world.setChunkData(t,e,null,m)}for(var s=0;s<e.shape[0];s++)for(var o=a+s,v=0;v<e.shape[2];v++){var l=g+v,h=Math.sqrt(o*o+l*l)/100,x=p(o,150),c=p(l+50,140),w=p(o-l-50,120);h+=2*x+c+w;for(var I=Math.random()<.002?5:0,R=39+2*(c-w),k=35+2*(x-c),d=0;d<e.shape[1];d++){var L=i+d,S=z(o,L,l,h,R,k,I);e.set(s,d,v,S)}}r.world.setChunkData(t,e)});r.inputs.down.on("fire",function(){if(r.targetedBlock){var t=r.targetedBlock.position;r.setBlock(0,t[0],t[1],t[2])}});r.on("tick",function(t){var e=r.inputs.pointerState.scrolly;e!==0&&(r.camera.zoomDistance+=e>0?1:-1,r.camera.zoomDistance<0&&(r.camera.zoomDistance=0),r.camera.zoomDistance>10&&(r.camera.zoomDistance=10))});r.inputs.bind("pause","KeyP");r.inputs.down.on("pause",function(){f=!f,r.setPaused(f)});var f=!1;window.setViewDistance=(t=100)=>{t=t<50?50:t>5e3?5e3:t;var e=Math.max(1.5,t/r.world._chunkSize),a=Math.max(1.5,.5*e);r.world.setAddRemoveDistance([e,a],[e+1,a+1])};var B=r.entities.getMovement(r.playerEntity);B.maxSpeed=50;B.moveForce=60;function p(t,e){var a=t/e,i=a-Math.floor(a);return E[i*1e3|0]}var M=[0,0,0].map(Math.random),E=Array.from(Array(1e3)).map((t,e)=>{var a=Math.cos(Math.PI*2*(e/1e3+M[0]));return a+=.5*Math.cos(Math.PI*2*(e/500+M[1])),a+=.25*Math.cos(Math.PI*2*(e/250+M[2])),a});
