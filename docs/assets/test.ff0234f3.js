import{E as fe}from"./index.b8668d75.js";import{T as C,C as de,M as z,V as pe,a as _,b as J}from"./babylon.939b618b.js";import{a as U}from"./terrain_atlas.162877cc.js";var t=new fe({debug:!0,showFPS:!0,inverseY:!0,inverseX:!1,chunkSize:32,chunkAddDistance:[3,2],blockTestDistance:50,playerStart:[.5,5,.5],playerHeight:1.4,playerWidth:.6,playerAutoStep:!0,useAO:!0,AOmultipliers:[.92,.8,.5],reverseAOmultiplier:1,manuallyControlChunkLoading:!1,originRebaseDistance:25});const $="data:image/png;base64,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",L=""+new URL("trans_atlas.f560e642.png",import.meta.url).href,me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAaCAYAAADWm14/AAAAAXNSR0IArs4c6QAAAI9JREFUSIntksENACEIBPVKoEMrs0Na8F4mhLCIp8l9mJdRYZfVUpIkSZIkOYQajZP655YRyampsAAS2jEQTiDalBoN7lx3jYSErbUWQfeRoat/QE4fPXvkhVURd67UaHhCu8AEUJSWMIo6Yth9Al3kmfJEvD5wkulcn8l9vfZ6oE9rJrB6Y2uimcKXfr/yAhU3dI9vWMHXAAAAAElFTkSuQmCC",ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAaAgMAAACr9basAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAADjDv8AAAByhjh8AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADqcAAA6nAVWbS4sAAAAtSURBVAjXY2BgYGB0YIAAVhgjFMpghDFYHWEMuOKBZDCGAoEDMgMDhEIBnAEAW0QOhjGMwZ4AAAAASUVORK5CYII=",Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAaAgMAAACr9basAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACVBMVEUAAADjDv8AAAByhjh8AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADqcAAA6nAVWbS4sAAABISURBVAjXY2BgYAgNYQADxtBQCIPVgTUAzBBlYITIAUkRMCMAxgDLQgErWYxQmEAITMABhwAjTIDRAaYnFOpWOAMdhEIBnAEALX4Nd4O12ekAAAAASUVORK5CYII=",Fe="data:image/png;base64,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",Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA7VBMVEV9fX1kZGRiYmKwsLCpqal/f39wcHCioqJ+fn5SUlJaWlptbW2mpqaJiYmsrKyHh4dnZ2eGhoaNjY2Ojo5jY2Ojo6O1/6ugoKB6enqSkpKFhYVWVlaXl5eDg4Obm5txcXGBgYFYWFilpaVTU1OZmZloaGhQUFCamppvb2+vr698fHxycnKurq6tra2/v7+enp6Pj493d3deXl6cnJyCgoKIiIiRkZF5eXl0dHRNTU1MTEynp6ddXV2MjIxlZWWWlpZmZmZsbGxOTk5bW1tpaWlhYWFzc3NRUVFZWVmrq6uEhIRfX19cXFxUVFQAAADM0rjRAAAAAWJLR0ROGWFx3wAAAAlwSFlzAAAOpwAADqcBVZtLiwAAAblJREFUOMuF01tbgkAQBmBcZkIoBE0mc80oxTIsD5FZ4ansXP//77Qj5YEu+K542Bd2d3ZW07RcTghdB0Dc2QEwjHw+lzNNy9rd3dvTdS0T2LYQAIWC47guQLGo66XS/r4Q5bLnoco/QJQCQhwcVCr8aJoAh4dEiNWqlDxxrXZ0lAakkgZC1OuadnwsJaK/BFKenJye8kijkQK0zBZoNgHkb4KAqNUiAjg740mFOD/fBpQA2gTt9sVFGHY6hnF5KdTfg+CKqIvY6yE6ThBsAfoDtAH6fccZDK6vo6hSIRLLcLFubobDwcCyNgGtAa3B7W2/PxpJeXd3ryaw7YcH34+JymHYaMSx626ApAaUAFoBPiqO79NW6vXxeDIRYg3Uy0JhOl2LFeDtIJZUjWazMGQ8n6uaPyafrgClAf0C03x6sm0GvMHFwrK4yMmJAETRH6D/gBIg5fOzlJYaN4xOJ4peXl5fmbaJqsOharlMIES322zWam9vmuZ5vd77OwADgA8VVepMQBnJBrPZeGwYiKMRYj4fx5+fX1/cbPM5N+Fkkg2Kxe9vbhpUt8F1k+vWai0WnseL9f1M8ANwtl+pHHQMVQAAAABJRU5ErkJggg==",he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA5FBMVEV9fX1kZGRiYmKwsLCpqal/f39wcHCioqJ+fn5SUlJaWlptbW2mpqaJiYmsrKyHh4dnZ2eGhoaNjY2Ojo5jY2Ojo6O1/6ugoKB6enpWVlaXl5eDg4OFhYWbm5txcXGBgYGPj4+lpaVTU1OZmZloaGhQUFBVVVVvb2+vr698fHxycnKurq6/v7+enp53d3deXl6cnJyCgoKIiIiRkZF5eXl0dHRNTU1dXV1MTEynp6eWlpaQkJBsbGyMjIxlZWVmZmZbW1tpaWlhYWFzc3NRUVFZWVmEhISrq6tfX19cXFxUVFQAAAAzd8JuAAAAAWJLR0RLaQuFUAAAAAlwSFlzAAAOpwAADqcBVZtLiwAAAahJREFUOMuF03tbgjAUBnA8bIEUgiarecMU1PCeGZl4LfPy/T9QO3gJMx/evwb7wcbZQZKkRAJAlgmh9OaGEEVR1UQimdS029u7O1mWYoGuAxCSShmGaRKSTstyJnN/D5DNWhYVuQAsTAQAPDw8PuKQRcNx4Vwun78EYlQ4BwDFoiSVSjhn2+UypVy4pyecqVT+BzwCqlVCeBjGHIdS163VCAlXogD1ejxoNJ6fPa/ZVBT8OM4dp9Vqiz3gUobhONcAPYFOxzC63V6v32dMVSGMeEHm5WUw6HY17Rec1SkCXl87neGQ87dzwDyvUvF904yCd851fTSybT8UB4BHhbEZ81Opjw8cj8cBY8XJZDoFuA7YCeDnUJphzJ3NPA9BEODR7R+NB8nkfK7rosR4BxYLTcMiiyuG0/3+dbA8AM6XS841DY4F+Pz6CmvZKBQGA9FyJwDnhWocAUC7Xa3mcquVJFlWuXyYFxv8FhGl/gvWa0LwwE6AxSQezGaTiaJQOhxSqqq+v9lst9hsQYBtOJ3Gg3R6t8OmwWY3zf3v5rqLhWXhZm07FvwAm2xbXpB5tmIAAAAASUVORK5CYII=",we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA9lBMVEV9fX1kZGRiYmKwsLCpqal/f39wcHCioqJ+fn5SUlJaWlptbW2mpqaJiYmsrKyHh4dnZ2eGhoaNjY2Ojo5jY2Ojo6OgoKB6enq1/6uFhYVWVlaXl5eDg4Obm5txcXGBgYFYWFilpaVTU1OPj4+ZmZloaGhQUFBVVVWamppvb2+bn5uvr698fHxycnKurq6tra2/v7+enp53d3deXl6cnJyIiIiRkZF5eXl0dHRNTU1MTEynp6ddXV2WlpaQkJBsbGyMjIxlZWVmZmZOTk5/gH9bW1tpaWlhYWGCgoJzc3NRUVFZWVmrq6uEhIRfX19cXFxUVFQAAADpPAm5AAAAAWJLR0RRlGl8KgAAAAlwSFlzAAAOpwAADqcBVZtLiwAAAcFJREFUOMuF02tXgkAQBmAcduJSCF7Idc0oL5gZllpmRaFWanf//69pp1Kok4f30x7mYXfYXRRFyWQAVJUxxK0txjRN1zMZwzDN7e2dHVVVUoFlATCWzdq24zCWy6lqPl8oABSLrosy6QBgd7dUoqFhMM45jcplIWjhSmVv7xfgP/kDAKpVRdnfF7Lk/ZCDg8NDqtRqCUDze169jl9iDRoNxgRFPm02EX2/1ZK9HNGiAO12Eog1YMcx6HROToKg25UTnAIIic7Oej1EuRTadrOZAKf/g37ftgeD83POSyVdh68g5vMXF8PhYGCaK8A3gsvLfn80ki1eXV8LYVk3N54XhsViENRqYeg4MeAbAB0VhfMwzGZvb2l8dxdF1ep4PJkAJADfBOhzZFuc+9NpEBCIIsT7++9Xk4DH4CEGhvH4aFm0xXRGs5lpIp2WP59TebFIAOCJxECI+VwI0wTQtO6qLDer0ymXh0N55X6B7mLx9PT8DEkA0Os1GpXKy4uiuG69/vrKGAHG3mTkVqcCnpJ0MJ2Ox5qGOBoh6noYvr9/fNBliyK6h5NJOsjllku6NIhCOM737+b7s5nrUrOelwo+AXEmY50HOoLOAAAAAElFTkSuQmCC";var i={},B=t.rendering.getScene(),l=t.registry,f=1;l.registerMaterial("greenish",{color:[.2,.5,.2]});l.registerMaterial("cloud",{color:[.9,.9,.92]});i.green=l.registerBlock(f++,{material:"greenish"});i.cloud=l.registerBlock(f++,{material:"cloud"});l.registerMaterial("stone",{textureURL:$});i.stone=l.registerBlock(f++,{material:"stone"});l.registerMaterial("a",{textureURL:Be});l.registerMaterial("b",{textureURL:he});l.registerMaterial("c",{textureURL:we});i.abc1=l.registerBlock(f++,{material:["a","b"]});i.abc2=l.registerBlock(f++,{material:["a","b","c"]});i.abc3=l.registerBlock(f++,{material:["a","b","c","a","b","c"]});l.registerMaterial("grass",{textureURL:U,atlasIndex:0});l.registerMaterial("gside",{textureURL:U,atlasIndex:1});l.registerMaterial("dirt",{textureURL:U,atlasIndex:2});l.registerMaterial("stone",{textureURL:U,atlasIndex:3});i.dirt=l.registerBlock(f++,{material:"dirt"});i.grass=l.registerBlock(f++,{material:["grass","dirt","gside"]});i.stone=l.registerBlock(f++,{material:"stone"});l.registerMaterial("t1",{textureURL:ee,texHasAlpha:!0});l.registerMaterial("t2",{textureURL:Ae,texHasAlpha:!0});i.transparent=l.registerBlock(f++,{material:["t1","t2"],opaque:!1});var K=!0;l.registerMaterial("stonea",{textureURL:L,texHasAlpha:K,atlasIndex:0});l.registerMaterial("stonec",{textureURL:L,texHasAlpha:K,atlasIndex:2});l.registerMaterial("stonee",{textureURL:L,texHasAlpha:K,atlasIndex:4});i.stoneTrans=l.registerBlock(f++,{material:["stonea","stonee","stonec"],opaque:!1});l.registerMaterial("water",{color:[.5,.5,.8,.7]});i.water=l.registerBlock(f++,{material:"water",fluid:!0});var Z=t.rendering.makeStandardMaterial("shinyDirtMat");Z.specularColor.copyFromFloats(1,1,1);Z.specularPower=32;Z.bumpTexture=new C($,B);l.registerMaterial("shinyDirt",{color:[.45,.36,.22],renderMaterial:Z});i.shinyDirt=l.registerBlock(f++,{material:"shinyDirt"});var T=de("pole",{},B),re=z.Scaling(.2,1,.2);re.setTranslation(new pe(0,.5,0));T.bakeTransformIntoVertices(re);B.removeMesh(T);i.pole=l.registerBlock(f++,{blockMesh:T,opaque:!1,onCustomMeshCreate:function(e,A,r,n){e.rotation.y=123.456*(A+32*n)%6.28}});i.waterPole=l.registerBlock(f++,{blockMesh:T,solid:!0,opaque:!1,material:"water",fluid:!0});var te=e=>{var A=t.rendering.makeStandardMaterial("voxel_trans");A.backFaceCulling=!1,A.diffuseTexture=new C(e),A.diffuseTexture.hasAlpha=!0;var r=_("cross",{},B);r.material=A,r.rotation.y+=Math.PI/4,r.bakeTransformIntoVertices(z.Translation(0,.5,0));var n=r.clone();n.rotation.y+=Math.PI/2;var a=J.MergeMeshes([r,n],!0);return a};i.custom1=l.registerBlock(f++,{blockMesh:te(ee),opaque:!1});i.custom2=l.registerBlock(f++,{blockMesh:te(Ae),opaque:!1});var k=t.rendering.makeStandardMaterial("windowMat");k.diffuseTexture=new C(Fe,B);k.opacityTexture=k.diffuseTexture;l.registerMaterial("window",{renderMaterial:k});i.window=l.registerBlock(f++,{material:"window",opaque:!1});var Me=(()=>{var e=t.rendering.makeStandardMaterial("grass_deco_mat");e.backFaceCulling=!1,e.diffuseTexture=new C(me,B,{samplingMode:C.NEAREST_SAMPLINGMODE,noMipmap:!0}),e.diffuseTexture.hasAlpha=!0;var A=_("grass_deco",{},B);return A.material=e,A})();i.grassDeco=l.registerBlock(f++,{blockMesh:Me,opaque:!1,solid:!1,onCustomMeshCreate:e=>{e.position.y=.47,e.rotation.y=Math.random()*6.28}});var u={},H=32;u.INT_BITS=H;u.INT_MAX=2147483647;u.INT_MIN=-1<<H-1;u.sign=function(e){return(e>0)-(e<0)};u.abs=function(e){var A=e>>H-1;return(e^A)-A};u.min=function(e,A){return A^(e^A)&-(e<A)};u.max=function(e,A){return e^(e^A)&-(e<A)};u.isPow2=function(e){return!(e&e-1)&&!!e};u.log2=function(e){var A,r;return A=(e>65535)<<4,e>>>=A,r=(e>255)<<3,e>>>=r,A|=r,r=(e>15)<<2,e>>>=r,A|=r,r=(e>3)<<1,e>>>=r,A|=r,A|e>>1};u.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};u.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function ae(e){var A=32;return e&=-e,e&&A--,e&65535&&(A-=16),e&16711935&&(A-=8),e&252645135&&(A-=4),e&858993459&&(A-=2),e&1431655765&&(A-=1),A}u.countTrailingZeros=ae;u.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1};u.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)};u.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var E=new Array(256);(function(e){for(var A=0;A<256;++A){var r=A,n=A,a=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=r&1,--a;e[A]=n<<a&255}})(E);u.reverse=function(e){return E[e&255]<<24|E[e>>>8&255]<<16|E[e>>>16&255]<<8|E[e>>>24&255]};u.interleave2=function(e,A){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,A&=65535,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,e|A<<1};u.deinterleave2=function(e,A){return e=e>>>A&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16};u.interleave3=function(e,A,r){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,A&=1023,A=(A|A<<16)&4278190335,A=(A|A<<8)&251719695,A=(A|A<<4)&3272356035,A=(A|A<<2)&1227133513,e|=A<<1,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,e|r<<2};u.deinterleave3=function(e,A){return e=e>>>A&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22};u.nextCombination=function(e){var A=e|e-1;return A+1|(~A&-~A)-1>>>ae(e)+1};var y=u;function Ee(e){for(var A=0,r=e.length,n=0,a,o;n<e.length;){for(a=e[n],o=0;n<r&&e[n]===a;)++n,++o;A+=y.log2(o)/7|0,A+=y.log2(a>>>0)/7|0,A+=2}return A}function Ce(e,A){A||(A=new Uint8Array(Ee(e)));for(var r=0,n=A.length,a=0,o,s;a<e.length;){for(o=e[a],s=0;a<e.length&&e[a]===o;)++a,++s;for(;r<n&&s>=128;)A[r++]=128+(s&127),s>>>=7;if(r>=n)throw new Error("RLE buffer overflow");for(A[r++]=s,o>>>=0;r<n&&o>=128;)A[r++]=128+(o&127),o>>>=7;if(r>=n)throw new Error("RLE buffer overflow");A[r++]=o}return A}var Ve=Ce;function ve(e,A){for(var r=A.length,n=e.length,a=0,o=0,s,c,d,g;o<n;){for(s=0,c=0;o<n&&e[o]>=128;)s+=(e[o++]&127)<<c,c+=7;if(s+=e[o++]<<c,o>=n)throw new Error("RLE buffer underrun");if(a+s>r)throw new Error("Chunk buffer overflow");for(d=0,c=0;o<n&&e[o]>=128;)d+=(e[o++]&127)<<c,c+=7;if(o>=n)throw new Error("RLE buffer underrun");for(d+=e[o++]<<c,g=0;g<s;++g)A[a++]=d}return A}var Ie=ve,D="world1",ne="world2",q={},Re=e=>!!q[e],ke=(e,A)=>{q[e]=Ve(A.data)},De=(e,A)=>{Ie(q[e],A.data)};t.worldName=D;t.inputs.bind("swap-world","KeyO");t.inputs.down.on("swap-world",function(){t.worldName=t.worldName===D?ne:D});t.world.on("chunkBeingRemoved",function(e,A,r){ke(e,A)});var W=[];t.world.on("worldDataNeeded",function(e,A,r,n,a,o){W.push({id:e,array:A,x:r,y:n,z:a,worldName:o})});setInterval(function(){for(var e=0;e<10;e++){if(W.length===0)return;var A=W.shift();if(Re(A.id))De(A.id,A.array);else{if(A.y<-50||A.y>50){var r=A.y>=0?0:i.stone;return t.world.setChunkData(A.id,A.array,null,r)}xe(A.array,A.x,A.y,A.z,A.worldName)}t.world.setChunkData(A.id,A.array)}},10);function xe(e,A,r,n,a){a===D&&Ue(e,A,r,n),a===ne&&Ze(e,A,r,n)}function Ue(e,A,r,n){for(var a=0;a<e.shape[0];++a)for(var o=A+a,s=0;s<e.shape[2];++s){var c=n+s,d=X(o,c,18,22);d+=X(o,c+50,9,6)/2;for(var g=0;g<e.shape[1];++g){var V=oe(o,r+g,c,d);V&&e.set(a,g,s,V)}var p=Te(o,c,20,30);if(p>0){var w=p-2*Math.sin(o/17),Y=p+3*Math.sin(c/22);for(g=0;g<e.shape[1];++g)r+g<w||r+g>Y||e.set(a,g,s,i.cloud)}}}function Ze(e,A,r,n){for(var a=0;a<e.shape[0];++a)for(var o=0;o<e.shape[2];++o)for(var s=X(A+a,n+o,20,40),c=0;c<e.shape[1];++c){var d=oe(A+a,r+c,n+o,s);d===i.grass&&(d=i.stone),d&&e.set(a,c,o,d)}}function X(e,A,r,n){var a=1.7*Math.sin(e/r),o=2.2*Math.sin(A/n),s=Math.sqrt(e*e+A*A);return(a+o)*Math.min(1,s/100)}function Te(e,A,r,n){var a=5+5*Math.sin(5+e/r),o=6+4*Math.sin(8+A/n-e/35),s=3+7*Math.sin((e+A)/17);return a+o+s>20?35:-1}function oe(e,A,r,n){if(e>0&&r>0){var a=1;return(r==40||e==40)&&(a=20),A>=a?0:A<0?i.stone:i.green}if(A<n)return A<-2.2?i.stone:A<0?i.dirt:i.grass;if(A<n+1&&A>0){var o=A<1?.05:A<2?.1:.2;if(Math.random()<o)return i.grassDeco}return A>=0?0:i.water}setTimeout(function(){Ye()},1e3);function Ye(){t.setBlock(i.abc2,-7,4,3),t.setBlock(i.transparent,-6,4,5),t.setBlock(i.custom1,-5,4,7),t.setBlock(i.custom2,-4,4,9),t.setBlock(i.window,12,1,6),t.setBlock(i.stoneTrans,14,1,6),t.setBlock(i.waterPole,-18,-1,15),t.setBlock(i.waterPole,-16,-1,15),t.setBlock(i.waterPole,-14,-1,15),F(20,5,1,7,1,i.pole),F(20,5,1,10,1,i.pole),F(20,5,1,12,1,i.pole),F(10,39,3,12,0,i.pole),F(10,41,3,12,0,i.pole),F(10,12,3,39,2,i.pole),F(10,12,3,41,2,i.pole);var e=4;be(8,5,e,i.shinyDirt)}function be(e,A,r,n){for(var a=0;a<e;a++)t.setBlock(n,A+a,1,r+a),t.setBlock(n,e*2+A-a,1,r+a)}function F(e,A,r,n,a,o){for(var s=0;s<e;s++){var c=a===0?A:A+s,d=a===1?r:r+s,g=a===2?n:n+s;t.setBlock(o,c,d,g),a===0&&(d=r+e-s),a===1&&(c=A+e-s),a===2&&(c=A+e-s),t.setBlock(o,c,d,g)}}var ie=t.playerEntity,le=t.entities.getPositionData(ie),Oe=le.width,se=le.height,x=J.CreateBox("player",1,t.rendering.getScene());x.scaling.x=x.scaling.z=Oe;x.scaling.y=se;var Ge=[0,se/2,0];t.entities.addComponent(ie,t.entities.names.mesh,{mesh:x,offset:Ge});function Se(e){var A=e.entities,r=.2;S||(S=J.CreateSphere("ball",6,2*r,e.rendering.getScene()));var n=A.getPosition(e.playerEntity),a=[n[0],n[1]+.5,n[2]],o=2*r,s=2*r,c=S.createInstance("ball_instance"),d=[0,r,0],g=!0,V=!0,p=e.entities.add(a,o,s,c,d,g,V),w=A.getPhysicsBody(p);w.restitution=.8,w.friction=.7;for(var Y=e.camera.getDirection(),b=[],v=0;v<3;v++)b[v]=5*Y[v];b[1]+=1,w.applyImpulse(b),Q||(Q=(M,O)=>{for(var G=A.getPosition(M),I=A.getPosition(O),R=[],m=0;m<3;m++)R[m]=2*(G[m]-I[m]);var h=A.getPhysicsBody(M);h.applyImpulse(R)}),A.addComponent(p,A.names.collideEntities,{cylinder:!0,callback:M=>Q(p,M)}),P||(P=A.createComponent({name:"remove",system:(M,O)=>{var G=A.getPosition(e.playerEntity);O.forEach(I=>{for(var R=A.getPosition(I.__id),m=0,h=0;h<3;h++)m+=Math.abs(G[h]-R[h]);m>500&&A.deleteEntity(I.__id)})}})),A.addComponent(p,P)}var S,Q,P;t.inputs.down.on("fire",function(){if(t.targetedBlock){var e=t.targetedBlock.position;t.setBlock(0,e[0],e[1],e[2])}});var ce=1;t.inputs.down.on("alt-fire",function(){if(t.targetedBlock){var e=t.targetedBlock.adjacent;t.addBlock(ce,e[0],e[1],e[2])}});t.inputs.down.on("mid-fire",function(){t.targetedBlock&&(ce=t.targetedBlock.blockID)});t.inputs.bind("pause","KeyP");t.inputs.down.on("pause",function(){N=!N,t.setPaused(N)});var N=!1;t.inputs.bind("invert-mouse","KeyI");t.inputs.down.on("invert-mouse",function(){t.camera.inverseY=!t.camera.inverseY});t.inputs.bind("shoot","Digit1");var j=()=>Se(t),ue,ge;t.inputs.down.on("shoot",function(){j(),ge=setTimeout(()=>{ue=setInterval(j,50)},400)});t.inputs.up.on("shoot",function(){clearTimeout(ge),clearInterval(ue)});var Qe=0;t.inputs.bind("slow","Digit3");t.inputs.down.on("slow",()=>{t.timeScale=[1,.1,2][++Qe%3]});t.on("tick",function(e){var A=t.inputs.pointerState.scrolly;A!==0&&(t.camera.zoomDistance+=A>0?1:-1,t.camera.zoomDistance<0&&(t.camera.zoomDistance=0),t.camera.zoomDistance>10&&(t.camera.zoomDistance=10))});window.setViewDistance=(e=100)=>{e=e<50?50:e>5e3?5e3:e;var A=Math.max(1.5,e/t.world._chunkSize),r=Math.max(1.5,.5*A);t.world.setAddRemoveDistance([A,r],[A+1,r+1])};
